{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block main %}
  <section class="hero is-medium is-primary">
    <div class="hero-body">
      <div class="container">
        <div class="columns is-centered">
          <div class="column is-8 has-text-centered">
            <h1 class="title is-1">{{ page.title }}</h1>
            {% if page.intro %}
              <p class="subtitle is-4">{{ page.intro|richtext }}</p>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <div class="columns is-multiline is-centered">
        {% for blog in blogpages %}
          <div class="column is-6-tablet is-4-desktop">
            <div class="card">
              {% if blog.featured_image %}
                <div class="card-image">
                  <figure class="image is-16by9">
                    {% image blog.featured_image fill-400x225 as blog_img %}
                    <img src="{{ blog_img.url }}" alt="{{ blog.title }}">
                  </figure>
                </div>
              {% endif %}

              <div class="card-content">
                <div class="content">
                  <div class="is-size-7 has-text-grey-light mb-2">
                    {{ blog.date|date:"d F Y"|upper }}
                  </div>
                  <h2 class="title is-5 mb-3">
                    <a href="{{ blog.url }}" class="has-text-dark">{{ blog.title }}</a>
                  </h2>
                  {% if blog.intro %}
                    <p class="has-text-grey">{{ blog.intro|truncatewords:20 }}</p>
                  {% endif %}
                </div>
              </div>

              <footer class="card-footer">
                <a href="{{ blog.url }}" class="card-footer-item has-text-primary">
                  Read More
                </a>
              </footer>
            </div>
          </div>
        {% empty %}
          <div class="column is-8 has-text-centered">
            <div class="content">
              <h2 class="title is-4">No blog posts yet</h2>
              <p>Check back soon for new content!</p>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </section>
{% endblock %}
